/******************************************************************************
 ******************************************************************************
 **                                                                          **
 **                          ファイルヘッダー                                  **
 **                          File: b_io_t.h                                  **
 **                                                                          **
 ******************************************************************************
 ******************************************************************************/

#ifndef B_IO_T_H
#define B_IO_T_H

/******************************************************************************
 *                                                                            *
 *                              ライブラリ読み込み                             *
 *                                                                            *
 ******************************************************************************/
#include "../../constants/constant.h"

/******************************************************************************
 *                                                                            *
 *                              入力デバイス型定義                             *
 *                                                                            *
 ******************************************************************************/

/*============================================================================*
 *                            入力タグ列挙型                                   *
 *============================================================================*/
typedef enum {
  ST_SW = 0,
} bio_input_tag_t;

/*============================================================================*
 *                            入力操作関数ポインタ型                           *
 *============================================================================*/
typedef struct {
  global_err_t (*init)(void* ctx);
  global_err_t (*get)(void* ctx, void* out);
  global_err_t (*poll)(void* ctx);
} bio_input_device_ops_t;

/*============================================================================*
 *                            入力デバイス構造体                               *
 *============================================================================*/
typedef struct {
  const bio_input_tag_t tag;
  const void* ctx;
  const bio_input_device_ops_t* ops;
} bio_input_device_t;

/******************************************************************************
 *                                                                            *
 *                              出力デバイス型定義                             *
 *                                                                            *
 ******************************************************************************/

/*============================================================================*
 *                            出力タグ列挙型                                   *
 *============================================================================*/
typedef enum {
  LED_MORSE = 0,
  LED_STATUS = 1,
} bio_output_tag_t;

/*============================================================================*
 *                            出力操作関数ポインタ型                           *
 *============================================================================*/
typedef struct {
  global_err_t (*init)(void* ctx);
  global_err_t (*set)(void* ctx, bool value);
} bio_output_device_ops_t;

/*============================================================================*
 *                            出力デバイス構造体                               *
 *============================================================================*/
typedef struct {
  const bio_output_tag_t tag;
  void* ctx;
  const bio_output_device_ops_t* ops;
} bio_output_device_t;

/******************************************************************************
 *                                                                            *
 *                              関数プロトタイプ                               *
 *                                                                            *
 ******************************************************************************/

/*============================================================================*
 *                            デバイス登録関数                                 *
 *============================================================================*/
global_err_t bswRegisterInputDevice(bio_input_device_t* device);
global_err_t bswRegisterOutputDevice(bio_output_device_t* device);

#endif  // B_IO_T_H