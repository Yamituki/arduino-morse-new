/******************************************************************************
 ******************************************************************************
 **                                                                          **
 **                          ファイルヘッダー                                  **
 **                          File: log.h                                     **
 **                                                                          **
 ******************************************************************************
 ******************************************************************************/

#ifndef LOG_H
#define LOG_H

/******************************************************************************
 *                                                                            *
 *                              ライブラリ読み込み                             *
 *                                                                            *
 ******************************************************************************/
#include <WString.h>

#include "../../constants/constant.h"
#include "ansi_log_color.h"

/******************************************************************************
 *                                                                            *
 *                              ログAPIマクロ                                  *
 *                                                                            *
 ******************************************************************************/

/*============================================================================*
 *                            標準ログ出力マクロ                               *
 *============================================================================*/
#define logDebug(msg) logPrint(LOG_DEBUG, __FILE__, __LINE__, msg)
#define logInfo(msg) logPrint(LOG_INFO, __FILE__, __LINE__, msg)
#define logWarning(msg) logPrint(LOG_WARNING, __FILE__, __LINE__, msg)
#define logError(msg) logPrint(LOG_ERROR, __FILE__, __LINE__, msg)

/*============================================================================*
 *                            フォーマット付きログ出力マクロ                   *
 *============================================================================*/
#define logDebugf(fmt, ...) logPrintFormat(LOG_DEBUG, __FILE__, __LINE__, fmt, ##__VA_ARGS__)
#define logInfof(fmt, ...) logPrintFormat(LOG_INFO, __FILE__, __LINE__, fmt, ##__VA_ARGS__)
#define logWarningf(fmt, ...) logPrintFormat(LOG_WARNING, __FILE__, __LINE__, fmt, ##__VA_ARGS__)
#define logErrorf(fmt, ...) logPrintFormat(LOG_ERROR, __FILE__, __LINE__, fmt, ##__VA_ARGS__)

/******************************************************************************
 *                                                                            *
 *                              型定義                                        *
 *                                                                            *
 ******************************************************************************/

/*============================================================================*
 *                            ログレベル列挙型                                 *
 *============================================================================*/
typedef enum {
  LOG_ERROR = 0,
  LOG_WARNING = 1,
  LOG_INFO = 2,
  LOG_DEBUG = 3,
} LogLevel_t;

/******************************************************************************
 *                                                                            *
 *                              関数プロトタイプ                               *
 *                                                                            *
 ******************************************************************************/

/*============================================================================*
 *                            ライフサイクル関数                               *
 *============================================================================*/
global_err_t logInit(void);

/*============================================================================*
 *                            ログ出力関数（内部使用）                           *
 *============================================================================*/
void logPrint(LogLevel_t level, const char* file, int line, const char* message);
void logPrintFormat(LogLevel_t level, const char* file, int line, const char* format, ...);

/*============================================================================*
 *                            設定関数                                         *
 *============================================================================*/
global_err_t logSetLevel(LogLevel_t level);
global_err_t logSetColorCodeWithLevel(LogLevel_t level, ANSIColorCode_t colorCode);

#endif  // LOG_H